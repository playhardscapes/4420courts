<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4420 Courts - Image Upload Tool</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .upload-section {
            text-align: center;
            margin: 40px 0;
        }
        
        #upload_widget {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        #upload_widget:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .results {
            margin-top: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .uploaded-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .image-info {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 12px;
        }
        
        .copy-btn:hover {
            background: #218838;
        }
        
        .config-section {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .config-section h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .config-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
        }
        
        .save-config {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÄ 4420 Courts</h1>
        <p class="subtitle">Image Upload Tool for Play Hardscapes</p>
        
        <div class="config-section">
            <h3>üìã Cloudinary Configuration</h3>
            <input type="text" id="cloudName" class="config-input" placeholder="Your Cloud Name" value="dqgy5mfvd">
            <input type="text" id="uploadPreset" class="config-input" placeholder="Your Upload Preset" value="ml_default">
            <button class="save-config" onclick="updateConfig()">üíæ Update Configuration</button>
            <p style="margin-top: 10px; font-size: 14px; color: #6c757d;">
                ‚ÑπÔ∏è You need to set your Cloudinary cloud name and create an unsigned upload preset first.
            </p>
        </div>
        
        <div class="upload-section">
            <button id="upload_widget">üì∏ Upload Images to Cloudinary</button>
        </div>
        
        <div id="results" class="results" style="display: none;">
            <h3>‚úÖ Upload Results</h3>
            <div id="uploadedImages"></div>
        </div>
    </div>

    <!-- Cloudinary Upload Widget Script -->
    <script src="https://upload-widget.cloudinary.com/latest/global/all.js" type="text/javascript"></script>
    
    <script type="text/javascript">
        let myWidget;
        
        // Configuration
        let config = {
            cloudName: 'dqgy5mfvd',
            uploadPreset: 'ml_default'
        };
        
        // Load saved config from localStorage
        function loadConfig() {
            const saved = localStorage.getItem('cloudinaryConfig');
            if (saved) {
                config = JSON.parse(saved);
                document.getElementById('cloudName').value = config.cloudName;
                document.getElementById('uploadPreset').value = config.uploadPreset;
            }
        }
        
        // Update configuration
        function updateConfig() {
            config.cloudName = document.getElementById('cloudName').value;
            config.uploadPreset = document.getElementById('uploadPreset').value;
            
            // Save to localStorage
            localStorage.setItem('cloudinaryConfig', JSON.stringify(config));
            
            // Recreate widget with new config
            createWidget();
            
            alert('‚úÖ Configuration updated successfully!');
        }
        
        // Create the upload widget
        function createWidget() {
            myWidget = cloudinary.createUploadWidget({
                cloudName: config.cloudName,
                uploadPreset: config.uploadPreset,
                sources: ['local', 'url', 'camera', 'image_search', 'dropbox', 'google_drive'],
                multiple: true,
                maxFiles: 10,
                maxFileSize: 10000000, // 10MB
                maxImageFileSize: 10000000,
                maxVideoFileSize: 50000000,
                clientAllowedFormats: ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg', 'mp4', 'mov', 'avi'],
                cropping: true,
                showAdvancedOptions: true,
                showCompletedButton: true,
                folder: '4420courts-uploads',
                publicId: '',
                tags: ['4420courts', 'playhardscapes'],
                context: {
                    caption: 'Uploaded via 4420 Courts Tool',
                    alt: 'Court surface image'
                },
                styles: {
                    palette: {
                        window: "#FFFFFF",
                        windowBorder: "#90A0B3",
                        tabIcon: "#0078FF",
                        menuIcons: "#5A616A",
                        textDark: "#000000",
                        textLight: "#FFFFFF",
                        link: "#0078FF",
                        action: "#FF620C",
                        inactiveTabIcon: "#0E2F5A",
                        error: "#F44235",
                        inProgress: "#0078FF",
                        complete: "#20B832",
                        sourceBg: "#E4EBF1"
                    }
                }
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log('Upload successful:', result.info);
                    displayUploadResult(result.info);
                }
                
                if (!error && result && result.event === "queues-end") {
                    console.log('All uploads completed');
                }
                
                if (error) {
                    console.error('Upload error:', error);
                    alert('‚ùå Upload failed: ' + error.message);
                }
            });
        }
        
        // Display upload results
        function displayUploadResult(info) {
            const resultsDiv = document.getElementById('results');
            const imagesDiv = document.getElementById('uploadedImages');
            
            resultsDiv.style.display = 'block';
            
            const imageContainer = document.createElement('div');
            imageContainer.style.marginBottom = '30px';
            imageContainer.style.borderBottom = '1px solid #ddd';
            imageContainer.style.paddingBottom = '20px';
            
            // Display the uploaded image/video
            if (info.resource_type === 'image') {
                const img = document.createElement('img');
                img.src = info.secure_url;
                img.className = 'uploaded-image';
                img.alt = info.original_filename;
                imageContainer.appendChild(img);
            } else if (info.resource_type === 'video') {
                const video = document.createElement('video');
                video.src = info.secure_url;
                video.controls = true;
                video.className = 'uploaded-image';
                imageContainer.appendChild(video);
            }
            
            // Create info sections
            const infoSections = [
                {
                    title: 'üîó Direct URL',
                    content: info.secure_url
                },
                {
                    title: 'üìù Public ID',
                    content: info.public_id
                },
                {
                    title: 'üìè Dimensions',
                    content: `${info.width} x ${info.height} px`
                },
                {
                    title: 'üì¶ File Size',
                    content: `${(info.bytes / 1024 / 1024).toFixed(2)} MB`
                },
                {
                    title: 'üè∑Ô∏è Format',
                    content: info.format.toUpperCase()
                },
                {
                    title: 'üìÖ Created',
                    content: new Date(info.created_at).toLocaleString()
                }
            ];
            
            infoSections.forEach(section => {
                const infoDiv = document.createElement('div');
                infoDiv.className = 'image-info';
                infoDiv.innerHTML = `
                    <strong>${section.title}:</strong> 
                    <span>${section.content}</span>
                    <button class="copy-btn" onclick="copyToClipboard('${section.content}')">üìã Copy</button>
                `;
                imageContainer.appendChild(infoDiv);
            });
            
            imagesDiv.appendChild(imageContainer);
        }
        
        // Copy to clipboard function
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Temporarily change button text
                event.target.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    event.target.textContent = 'üìã Copy';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                event.target.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    event.target.textContent = 'üìã Copy';
                }, 2000);
            });
        }
        
        // Initialize
        loadConfig();
        createWidget();
        
        // Add click event to upload button
        document.getElementById("upload_widget").addEventListener("click", function(){
            if (config.cloudName === 'your-cloud-name' || config.uploadPreset === 'your-upload-preset') {
                alert('‚ö†Ô∏è Please configure your Cloudinary settings first!');
                return;
            }
            myWidget.open();
        }, false);
    </script>
</body>
</html>